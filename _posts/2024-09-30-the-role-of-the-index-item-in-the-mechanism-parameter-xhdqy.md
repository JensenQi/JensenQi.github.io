---
title: æœºåˆ¶å‚æ•°ä¸­æŒ‡æ•°é¡¹çš„ä½œç”¨
mermaid: false
chart: false
mathjax: true
mathjax_autoNumber: true
tags: ç­–ç•¥ç®—æ³•
---



## èƒŒæ™¯

å¯¹äºå¤§éƒ¨åˆ†çš„å¹¿å‘Šæˆ–æ¨èç®—æ³•å›¢é˜Ÿè€Œè¨€ï¼Œéƒ½ä¼šé€šè¿‡æ¨¡å‹å¯¹æ¯ä¸ªå•†å“è®¡ç®—å‡ºä¸€ä¸ª CTR æ‰“åˆ†å’Œ CVR æ‰“åˆ†ï¼Œç„¶åå°†è¿™ä¸¤ä¸ªæ¨¡å‹çš„æ‰“åˆ†ç»¼åˆèµ·æ¥è®¡ç®—ä¸€ä¸ªæ’åºåˆ†æ•° RankScoreï¼Œæœ€åæŒ‰ RankScore å€’æ’åºé˜¶æ®µä¸€å®šæ•°é‡çš„å•†å“é€å…¥é‡æ’ã€‚

åœ¨æ¨èåœºæ™¯ä¸‹ï¼ŒRankScore çš„è®¡ç®—å…¬å¼ä¸€èˆ¬ä¸º

$$
RankScore = ctr^{ctrPow}*cvr^{cvrPow}*price^{pricePow}
$$

å› æ­¤å¯ä»¥è¿‘ä¼¼åœ°è®¤ä¸º RankScore \= GMV Scoreï¼Œè€Œåœ¨å¹¿å‘Šåœºæ™¯ä¸‹ï¼Œéœ€è¦è€ƒè™‘å¹¿å‘Šå‡ºä»·ï¼Œå› æ­¤ä¸€èˆ¬ä¼šåŠ ä¸Šä¸€ä¸ª cpmScore å’Œ GMV Score çš„æƒé‡ï¼Œä¹Ÿå°±æ˜¯

$$
RankScore = ctr^{ctrPow}*bid + gmvWeight * ctr^{ctrPow}*cvr^{cvrPow}*price^{pricePow}
$$

è¿™ä¸¤ä¸ªå…¬å¼æ˜¯æ¯”è¾ƒæ˜¾è€Œæ˜“è§çš„ï¼Œå”¯ä¸€ä¸€ä¸ªå¯èƒ½ä¸ç›´è§‰ä¸ç¬¦çš„ç‚¹åœ¨äºï¼ŒCTRã€CVRã€Price é¡¹éƒ½æœ‰ä¸€ä¸ªæŒ‡æ•°é¡¹ï¼Œè¿™ä¸‰ä¸ªæŒ‡æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæœºåˆ¶å‚æ•°ã€‚è¿™äº›æŒ‡æ•°é¡¹çš„ä½œç”¨å…¶ç›®çš„æ˜¯ä¸ºäº†æ§åˆ¶ RankScore çš„èµ°å‘ï¼šå½“å…¶ä»– power é¡¹ä¸å˜çš„æ—¶å€™ï¼Œè°ƒå¤§ ctrPowï¼Œåˆ™ CTR è¶Šé«˜çš„å•†å“è¶Šå¯èƒ½è¢«å±•ç¤ºï¼Œé‚£ä¹ˆæ¨èæ•ˆæœä¼šå€¾å‘äºç‚¹å‡»ï¼Œå¯¹åº”çš„ï¼Œå¦‚æœè°ƒå¤§ cvrPowï¼Œåˆ™ CVR è¶Šé«˜çš„å•†å“è¶Šå¯èƒ½è¢«å±•ç¤ºï¼Œé‚£ä¹ˆæ¨èæ•ˆæœä¼šå€¾å‘äºè½¬åŒ–ï¼ŒåŒç†ï¼Œå¦‚æœè°ƒå¤§ pricePowï¼Œåˆ™ä»·æ ¼è¶Šé«˜çš„å•†å“è¶Šå¯èƒ½è¢«å±•ç¤ºï¼Œåˆ™æ¨èæ•ˆæœå€¾å‘äºé«˜å•ä»·å•†å“ã€‚

æœ‰çš„äººå¯èƒ½ä¼šå¯¹ä¸Šé¢è¿™ä¸ªç»“è®ºäº§ç”Ÿç–‘æƒ‘ï¼šå‡è®¾æˆ‘ä»¬å®šä¹‰ ctr ä¸º $x$ï¼Œå¦‚æœ $a > b$ï¼Œåˆ™ $x^a/x^b =x^{(a-b)}$ ï¼Œç”±äº $a-b > 0$ ä¸” $0 \leq x \leq 1$ ï¼Œæ‰€ä»¥ $x^a/x^b < 1$ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼ŒctrPow è¶Šå¤§ï¼Œåˆ™ $ctr^{ctrPow}$ è¶Šå°ï¼Œé‚£ä¹ˆ rankScore å°±è¶Šå°ï¼Œè¿™ä¸ä¸Šé¢çš„ç»“è®ºçŸ›ç›¾ã€‚å› æ­¤è¿™ç¯‡åšå®¢æˆ‘ä»¬é€šè¿‡ä¸¥æ ¼çš„æ•°å­¦è¯æ˜æ¥è¯æ˜è¿™ä¸ªç»“è®ºã€‚

## è¯æ˜

å¯¹äºä¸€ä¸ªè¯·æ±‚ï¼Œå¬å›äº† N çš„å•†å“ï¼Œå®ƒä»¬çš„ CTR æ‰“åˆ†ä¸º $x_i$ï¼ŒCVR æ‰“åˆ†ä¸º $y_i$, å…¶ä½™ç­–ç•¥åŠ æƒé¡¹æ±‡æ€»ä¸º $\eta_i$, ctr power å’Œ cvr power åˆ†åˆ«ä¸º $\alpha$ å’Œ $\beta$ï¼Œåˆ™å®ƒä»¬çš„ RankScore è®¡ç®—å…¬å¼ä¸º

$$
s_i = \eta_i * x_i^\alpha * y_i^\beta
$$

ç”±äº $\ln$ å‡½æ•°æ˜¯ä¿åºæ˜ å°„, å³å¯¹äº $x_1 > x_2$, æœ‰ $\ln(x_1) > \ln(x_2)$ï¼Œä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œæˆ‘ä»¬å°† rankScore å–å¯¹æ•°ï¼Œå³

$$
s_i = \ln \eta_i + \alpha \ln x_i + \beta \ln y_i
$$

> ğŸ’¡çŒœæƒ³  
> ä¸å˜çš„å‰æä¸‹ï¼Œ å–å€¼è¶Šå¤§ï¼Œåˆ™è¶Šå€¾å‘äº CVR æ‰“åˆ†

è½¬åŒ–ä¸ºæ•°å­¦è¯­è¨€ï¼Œå³å¯¹äºé˜Ÿåˆ—ä¸­ä»»æ„ä¸¤ä¸ªå•†å“ $i$ å’Œ $j$ï¼Œåœ¨ $\alpha$ ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ$\beta$ å–å€¼è¶Šå¤§ï¼Œåˆ™ CVR æ‰“åˆ†é«˜çš„å•†å“ï¼Œæ’åœ¨å‰é¢ï¼ˆrankScore é«˜ï¼‰çš„æ¦‚ç‡ $p$ è¶Šå¤§

$$
p = P(s_i > s_j | y_i > y_j)
$$

åº”ç”¨æ¡ä»¶æ¦‚ç‡å…¬å¼ï¼Œæœ‰

$$
p = P(s_i > s_j | y_i > y_j) = \frac{P(s_i > s_j \cap y_i > y_j)}{P(y_i > y_j)}
$$

å¯¹äº $s_i > s_j$ äº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸¤è€…çš„å·®å¤§äº 0 æ¥æè¿°ï¼Œå³

$$
s_i - s_j = \ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta\ln\frac{y_i}{y_j} > 0
$$

åˆ™å¯ä»¥æ”¹å†™æˆ

$$
p = P(s_i > s_j | y_i > y_j) = \frac{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta\ln\frac{y_i}{y_j} > 0 \cap y_i > y_j)}{P(y_i > y_j)}
$$

åŒç†ï¼Œå¯¹äºå¦ä¸€ä¸ªæ›´å¤§çš„æœºåˆ¶å‚æ•° $\beta' > \beta$ , å®ƒå¯¹åº”çš„æ¦‚ç‡ $p'$ ä¸º

$$
p' = P(s_i > s_j | y_i > y_j) = \frac{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta'\ln\frac{y_i}{y_j} > 0 \cap y_i > y_j)}{P(y_i > y_j)}
$$

å¦‚æœ $p'>p$ï¼Œåˆ™å¯ä»¥è¯´æ˜ $\beta$ è¶Šå¤§ï¼ŒCVR æ‰“åˆ†é«˜æ’åœ¨å‰é¢å¾—æ¦‚ç‡è¶Šé«˜ï¼Œä¸ºæ­¤æˆ‘ä»¬è®¡ç®—æ¯”å€¼ $p'/p$ï¼Œæœ‰

$$
\frac{p'}{p} = \frac{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta'\ln\frac{y_i}{y_j} > 0 \cap y_i > y_j)}{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta\ln\frac{y_i}{y_j} > 0 \cap y_i > y_j)}
$$

æ ¹æ®æ¡ä»¶æ¦‚ç‡å¾—å«ä¹‰ï¼Œå¯ä»¥å¢åŠ çº¦æŸ $y_i > y_j$ï¼Œç„¶åç®€åŒ–ä¸º

$$
\frac{p'}{p} = \frac{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta'\ln\frac{y_i}{y_j} > 0)}{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}+\beta\ln\frac{y_i}{y_j} > 0)}ï¼Œ s.t~~y_i>y_j
$$

æ¥ç€æˆ‘ä»¬ç§»ä¸€ä¸‹é¡¹ï¼Œæœ‰

$$
\frac{p'}{p} = \frac{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j} > \beta'\ln\frac{y_j}{y_i} )}{P(\ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j} > \beta\ln\frac{y_j}{y_i} )}
$$

ç”±äº $y_i > y_j$ ï¼Œåˆ™ $\ln\frac{y_j}{y_i} < 0$ï¼Œå› æ­¤ $\beta' > \beta$ ä¸¤è¾¹ä¹˜ä¸Š $\ln\frac{y_j}{y_i}$ éœ€è¦å˜å·ï¼Œåˆ™

$$
\beta'\ln\frac{y_j}{y_i} < \beta \ln\frac{y_j}{y_i}
$$

è®°éšæœºå˜é‡  $z_k = \ln\frac{\eta_i}{\eta_j} + \alpha \ln\frac{x_i}{x_j}$ï¼Œæ ¹æ®ç´¯è®¡åˆ†å¸ƒçš„æ€§è´¨

$$
P(z_k > a) > P(z_k > b), s.t~~a<b
$$

æœ‰

$$
P(z_k > \beta'\ln\frac{y_j}{y_i} ) > P(z_k > \beta\ln\frac{y_j}{y_i} )
$$

å› æ­¤ $p' > p$ï¼Œè¯æ¯•

## æ‚–è®ºäº§ç”Ÿçš„åŸå› 

å›åˆ°æˆ‘ä»¬å¼€ç¯‡æåˆ°çš„æ‚–è®º

> å‡è®¾æˆ‘ä»¬å®šä¹‰ ctr ä¸º $x$ï¼Œå¦‚æœ $a > b$ï¼Œåˆ™ $x^a/x^b =x^{(a-b)}$ ï¼Œç”±äº $a-b > 0$ ä¸” $0 \leq x \leq 1$ ï¼Œæ‰€ä»¥ $x^a/x^b < 1$ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼ŒctrPow è¶Šå¤§ï¼Œåˆ™ $ctr^{ctrPow}$ è¶Šå°ï¼Œé‚£ä¹ˆ rankScore å°±è¶Šå°

è¿™ä¸ªç»“è®ºçš„é—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿé—®é¢˜å‡ºåœ¨  $x^a/x^b < 1$ è¿™ä¸ªæ¯”å€¼æ˜¯æ— æ„ä¹‰çš„ï¼Œå› ä¸ºè¿™ä¸ªå¯¹æ¯”ç›¸å½“äºåœ¨ä¸¤å¥—æœºåˆ¶å‚æ•°ä¸‹å¯¹åŒä¸€ä¸ªå•†å“çš„ RankScore è¿›è¡Œå¯¹æ¯”ã€‚è€Œæœ‰æ„ä¹‰çš„å¯¹æ¯”æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæœ‰æ„ä¹‰çš„å¯¹æ¯”åº”è¯¥æ˜¯åŒä¸€å¥—æœºåˆ¶å‚æ•°ä¸‹ï¼Œä¸åŒå•†å“çš„ rankScore å¯¹æ¯”ã€‚
